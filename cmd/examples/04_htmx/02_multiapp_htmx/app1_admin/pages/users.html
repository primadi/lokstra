<!-- layout: admin.html -->
<!-- title: User Management -->

<div class="users-page">
    <div class="page-header">
        <h2>User Management</h2>
        <button class="btn btn-primary" hx-get="/app1/api/users/create" hx-target="#user-form">
            ‚ûï Add New User
        </button>
    </div>

    <!-- User Form Section -->
    <div id="user-form" class="form-section">
        <!-- Form content loaded via HTMX -->
    </div>

    <!-- User Table -->
    <div class="table-section">
        <div class="table-header">
            <h3>All Users ({{len .users}})</h3>
            <div class="table-controls">
                <input type="text" 
                       placeholder="Search users..." 
                       hx-get="/app1/api/users/search" 
                       hx-target="#users-table"
                       hx-trigger="keyup changed delay:300ms"
                       name="q"
                       class="search-input">
                <select hx-get="/app1/api/users/filter" hx-target="#users-table" name="role">
                    <option value="">All Roles</option>
                    <option value="admin">Admin</option>
                    <option value="user">User</option>
                    <option value="moderator">Moderator</option>
                </select>
            </div>
        </div>

        <div id="users-table">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Avatar</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Role</th>
                        <th>Status</th>
                        <th>Last Login</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {{range .users}}
                    <tr>
                        <td>
                            <div class="user-avatar">{{.avatar}}</div>
                        </td>
                        <td>
                            <div class="user-name">{{.name}}</div>
                        </td>
                        <td>{{.email}}</td>
                        <td>
                            <span class="role-badge {{.role}}">{{.role}}</span>
                        </td>
                        <td>
                            <span class="status-badge {{.status}}">{{.status}}</span>
                        </td>
                        <td>{{.last_login}}</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-sm btn-edit" 
                                        hx-get="/app1/api/users/{{.id}}/edit" 
                                        hx-target="#user-form">
                                    ‚úèÔ∏è
                                </button>
                                <button class="btn btn-sm btn-danger" 
                                        hx-delete="/app1/api/users/{{.id}}" 
                                        hx-confirm="Are you sure you want to delete this user?"
                                        hx-target="#users-table">
                                    üóëÔ∏è
                                </button>
                            </div>
                        </td>
                    </tr>
                    {{end}}
                </tbody>
            </table>
        </div>
    </div>
</div>