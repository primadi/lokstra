# yaml-language-server: $schema=https://lokstra.dev/schema/lokstra.json

# Order Service Deployment (Microservice)
# Only order service running
# Calls product service via HTTP
# Best for: Production microservices deployment
# Performance: Network overhead for cross-service calls

services:
  # Infrastructure Layer
  - name: db
    type: DBService

  - name: cache
    type: CacheService

  # Repository Layer
  - name: order-repo
    type: OrderRepository
    config:
      db_service: db
  
  # Business Logic Layer
  - name: order-svc
    type: OrderService
    config:
      repo_service: order-repo

servers:
  - name: order-server
    deployment-id: order-microservice
    baseUrl: "${ORDER_URL:http://localhost:8082}"
    apps:
      - addr: :8082
        routers: [order-api, health-api]
