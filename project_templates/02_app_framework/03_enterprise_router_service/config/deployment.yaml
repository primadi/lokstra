# yaml-language-server: $schema=https://primadi.github.io/lokstra/schema/lokstra.schema.json

configs:
  server: ${SERVER:development.api-server}
  store:
    order-repository: order-repository

named-db-pools:
  global-db:
    dsn: ${GLOBAL_DB_DSN:postgres://postgres:adm1n@localhost:5432/lokstra_db}
    schema: ${GLOBAL_DB_SCHEMA:lokstra_auth}
    
deployments:
  development:
    servers:
      api-server:
        base-url: "http://localhost"
        addr: ":3000"
        routers: [ health-router ]
        published-services: [ user-service, order-service ]
  microservice:
    servers:
      user-server:
        base-url: "http://localhost"
        addr: ":4000"
        routers: [ health-router ]
        published-services: [ user-service ]
      order-server:
        base-url: "http://localhost"
        addr: ":5000"
        routers: [ health-router ]
        published-services: [ order-service ]
