### LOKSTRA ENTERPRISE MODULAR TEMPLATE - API Testing
### This file demonstrates API endpoints for User and Order modules
### Each module is a bounded context with its own domain logic

@baseUrl = http://localhost:3000
@contentType = application/json

################################################################################
# USER MODULE - User Management Operations
################################################################################

### Get all users
GET {{baseUrl}}/api/users
Content-Type: {{contentType}}

### Get user by ID
GET {{baseUrl}}/api/users/1
Content-Type: {{contentType}}

### Create new user
POST {{baseUrl}}/api/users
Content-Type: {{contentType}}

{
  "name": "Alice Johnson",
  "email": "alice@example.com",
  "role_id": 2
}

### Update user
PUT {{baseUrl}}/api/users/2
Content-Type: {{contentType}}

{
  "name": "John Updated",
  "email": "john.updated@example.com",
  "role_id": 2
}

### Suspend user account
POST {{baseUrl}}/api/users/2/suspend
Content-Type: {{contentType}}

{
  "reason": "Suspicious activity detected"
}

### Activate user account
POST {{baseUrl}}/api/users/2/activate
Content-Type: {{contentType}}

### Delete user
DELETE {{baseUrl}}/api/users/3
Content-Type: {{contentType}}

################################################################################
# ORDER MODULE - Order Management Operations
################################################################################

### Get all orders
GET {{baseUrl}}/api/orders
Content-Type: {{contentType}}

### Get orders by user (query param)
GET {{baseUrl}}/api/orders?user_id=2
Content-Type: {{contentType}}

### Get orders by status (query param)
GET {{baseUrl}}/api/orders?status=pending
Content-Type: {{contentType}}

### Get order by ID
GET {{baseUrl}}/api/orders/1
Content-Type: {{contentType}}

### Create new order
POST {{baseUrl}}/api/orders
Content-Type: {{contentType}}

{
  "user_id": 1,
  "total_price": 299.99
}

### Update order status
PUT {{baseUrl}}/api/orders/2/status
Content-Type: {{contentType}}

{
  "status": "completed"
}

### Cancel order
POST {{baseUrl}}/api/orders/3/cancel
Content-Type: {{contentType}}

{
  "reason": "Customer requested cancellation"
}

### Delete order
DELETE {{baseUrl}}/api/orders/1
Content-Type: {{contentType}}

################################################################################
# CROSS-MODULE SCENARIO - User with their orders
################################################################################

### 1. Create a new user
# @name createUser
POST {{baseUrl}}/api/users
Content-Type: {{contentType}}

{
  "name": "Bob Customer",
  "email": "bob@example.com",
  "role_id": 2
}

### 2. Create order for the new user (use ID from previous response)
POST {{baseUrl}}/api/orders
Content-Type: {{contentType}}

{
  "user_id": 4,
  "total_price": 159.50
}

### 3. Get all orders for the user
GET {{baseUrl}}/api/orders?user_id=4
Content-Type: {{contentType}}

################################################################################
# NOTES
################################################################################

# Enterprise Modular Architecture Benefits:
# 
# 1. BOUNDED CONTEXTS: Each module (user, order) is isolated
#    - User module knows nothing about orders
#    - Order module knows nothing about user details (only user_id)
#    - Clear separation of concerns
#
# 2. MODULAR CONFIGURATION: Each module has its own YAML
#    - config/user.yaml defines user endpoints
#    - config/order.yaml defines order endpoints
#    - Lokstra automatically merges them into one deployment
#
# 3. PORTABILITY: Easy to move modules to microservices
#    - Copy modules/user/ folder to new project
#    - Copy config/user.yaml to new project
#    - Update register.go to register user module
#    - Done! User module now runs independently
#
# 4. TEAM SCALABILITY: Different teams can own different modules
#    - Team A owns user module
#    - Team B owns order module
#    - Minimal coordination needed
#
# 5. DEPLOYMENT FLEXIBILITY: Same code, different deployments
#    - Monolith: All modules in one server (current setup)
#    - Microservices: Each module as separate service
#    - Hybrid: Some modules together, some separate
#    - Configuration change only, no code change needed!
