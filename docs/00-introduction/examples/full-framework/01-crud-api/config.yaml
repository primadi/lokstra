# yaml-language-server: $schema=https://primadi.github.io/lokstra/schema/lokstra.schema.json

# ========================================
# CRUD API - YAML Configuration
# ========================================
# This config is used when running with: go run main.go --mode=config

# Global configs
configs:
  server: ${SERVER:}

# Service definitions
service-definitions:
  database:
    type: database-factory
    config:
      seed_data: true
  
  user-service:
    type: user-service-factory
    depends-on: [database]  # Auto lazy-loaded!

router-definitions:
  api:
    path-rewrites:
      - pattern: "^/api/v1/(.*)$"
        replacement: "/api/v2/$1"

# Deployment configuration
deployments:
  development:
    servers:
      api:
        base-url: ${API_BASE_URL:http://localhost}
        addr: ${API_ADDR::3002}
        routers: [api]  # Manual router registered in code
